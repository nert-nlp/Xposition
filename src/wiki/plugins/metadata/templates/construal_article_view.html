{% extends "wiki/article.html" %}
{% load wiki_tags i18n sekizai_tags %}
{% load metadata_tags %}
{% load static %}
{% block wiki_articletitle %}
<i class="fa fa-paint-brush fa-2x" aria-hidden="true" style="opacity: .1; position: absolute; left: -80px;"></i>
{{block.super}}
{% endblock %}

{% block wiki_contents_tab %}
<div class="">
  <div class="row">
  <div class="col-md-9">
    {% wiki_render article %}

    {% usagerevs_for_construal as usages %}
    <h4 id="usages">Usages ({{usages|length}})</h4>
    <ul>
      {% for u in usages %}
      <li>{{u.html}}</li>
      {% endfor %}
    </ul>

    {% include "category_article_view.html" %}


  </div>
  <div class="col-md-3">
    {% metadata_display %}{# if there is metadata for the article, display it! #}
  </div>
    </div>
  <div class="col-md-auto">
    <div id="table-container" class="table-responsive" style="max-height: 50vh; overflow: auto;">
      <div style="height: 50vh;" class="text-center">
        <i class="fa fa-spinner fa-spin" style="font-size:24px; margin-top: 25vh;"></i>
      </div>
    </div>
  </div>

  </div>


    <script src="{% static "wiki/js/jquery-3.4.1.min.js" %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-markdown/2.10.0/js/bootstrap-markdown.js" integrity="sha512-pho6CWrO/GDwYDCNxcHT9ODBGjwDOEv7JXyumGxAkcaJYSizVmSIVTp4+u5PuVmYUgBhmNYxB0rOAejhebLOew==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


   <script>
    $.ajax({
      url: "/_table/construal/{{article.id}}",
      success: function (data) {
        var container = document.getElementById("table-container");
        container.innerHTML = data;
        var a = document.createElement('a');
        a.setAttribute("href", "/_table/construal/{{article.id}}/?perpage=100");
        a.setAttribute("target", "_blank");
        a.innerHTML = '<i class="fa fa-external-link"></i> Open table in separate window';

        var pagination = container.querySelector("ul.pagination");
        if (pagination.innerText) {
          pagination.remove(); // don't let them paginate in the page
          a.innerHTML = '<i class="fa fa-external-link"></i> See more examples in separate window';
        }
        container.parentNode.appendChild(a);
      }
    })
  </script>

{% endblock %}



